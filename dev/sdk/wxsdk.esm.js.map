{"version":3,"file":"wxsdk.esm.js","sources":["../src/utils.js","../src/router.js","../src/handle-config/index.js","../src/report-code.js","../src/core.js","../src/plugin/auto-report.js","../src/plugin/first-screen-time.js","../src/overide/wx.js","../src/overide/index.js","../src/index.js"],"sourcesContent":["export const warn = (message, isWarn) => {\r\n  message = `\\n[SDK warn]: ${message}\\n\\n`\r\n  if (isWarn) {\r\n    console.warn(message)\r\n    return\r\n  }\r\n  throw new Error(message)\r\n}\r\n\r\nexport const assert = (condition, error) => {\r\n  if (condition) {\r\n    warn(error)\r\n  }\r\n}\r\n\r\nexport const once = fn => {\r\n  let called = false\r\n  return function () {\r\n    if (!called) {\r\n      called = true\r\n      return fn.apply(this, arguments)\r\n    }\r\n  }\r\n}\r\n\r\nexport const isUndef = v => {\r\n  return v === null || v === undefined\r\n}\r\n\r\nexport const callHook = (hooks, name, params) => {\r\n  if (hooks && typeof hooks[name] === 'function') {\r\n    return hooks[name].apply(hooks, params)\r\n  }\r\n  return null\r\n}\r\n\r\nexport const remove = (list, item) => {\r\n  const index = list.indexOf(item)\r\n  if (~index) {\r\n    list.splice(index, 1)\r\n  }\r\n}\r\n\r\nexport const createWraper = (target, fn) => {\r\n  return function (...args) {\r\n    fn.apply(this, args)\r\n    if (typeof target === 'function') {\r\n      return target.apply(this, args)\r\n    }\r\n  }\r\n}\r\n\r\nexport const isPlainObject = obj => {\r\n  if (typeof obj !== 'object' || obj === null) return false\r\n\r\n  const proto = Object.getPrototypeOf(obj)\r\n  if (proto === null) return true\r\n\r\n  let baseProto = proto\r\n  while (Object.getPrototypeOf(baseProto) !== null) {\r\n    baseProto = Object.getPrototypeOf(baseProto)\r\n  }\r\n  return proto === baseProto\r\n}","// 处理路由跳转相关数据\r\nexport default class Router {\r\n  constructor (sdk) {\r\n    this.sdk = sdk\r\n  }\r\n\r\n  report (name, payload) {\r\n    payload.type = name\r\n    this.sdk.report('router', payload)\r\n  }\r\n\r\n  reportError (name, payload) {\r\n    payload.type = name\r\n    this.sdk.report('routerError', payload)\r\n  }\r\n\r\n  // 获取当前页面\r\n  getCurrentPage () {\r\n    const pages = getCurrentPages()\r\n    return Array.isArray(pages) && pages.length > 0\r\n      ? pages[pages.length - 1]\r\n      : null\r\n  }\r\n}","// 用来处理 sdkconfig 配置\r\nexport default {\r\n  app: {\r\n\r\n  },\r\n\r\n  page: {\r\n    onLoad (sdk, page, opts, SDKConfig) {\r\n\r\n    },\r\n  \r\n    onUnLoad (sdk, page, opts, SDKConfig) {\r\n  \r\n    },\r\n  },\r\n  \r\n  component: {\r\n\r\n  },\r\n\r\n  update (component, SDKConfig, isPage) {\r\n\r\n  },\r\n}","import { assert } from './utils'\r\n\r\n// 错误类为 1x\r\n// 时间类为 2x\r\n// 路由类为 3x\r\n// 优先级从上到下\r\nexport const reportCodes = {\r\n  'catchGlobalError': 11, // app 里面捕获到的全局错误\r\n  'routerError': 130, // 路由发送错误的时长\r\n  'router': 30, // 路由跳转成功\r\n}\r\n\r\nexport const addCode = (key, code) => {\r\n  assert(key in reportCodes, `The [${key}] already exists.`)\r\n  reportCodes[key] = code\r\n}\r\n\r\nexport const getCode = key => {\r\n  assert(!(key in reportCodes), `Code [${key}] is does not exist.`)\r\n  return reportCodes[key]\r\n}","import {\r\n  warn,\r\n  assert,\r\n  isUndef,\r\n  callHook,\r\n  createWraper,\r\n  isPlainObject,\r\n} from './utils'\r\nimport Router from './router'\r\nimport handleConfigHooks from './handle-config'\r\nimport { getCode, addCode, reportCodes } from './report-code'\r\n\r\nexport default class SDK {\r\n  constructor (opts) {\r\n    this.opts = opts\r\n    this.reportStack = {}\r\n    this.hooks = opts.hooks\r\n    this.depComponents = new Map()\r\n    this.router = new Router(this)\r\n    this.reportCodes = reportCodes\r\n    this.installedPlugins = new Set()\r\n    this.timeStack = Object.create(null)\r\n  }\r\n\r\n  time (type) {\r\n    if (typeof type === 'string') {\r\n      if (isUndef(this.timeStack[type])) {\r\n        this.timeStack[type] = Date.now()\r\n      } else {\r\n        warn(`Timer [${type}] already exists.`, true)\r\n      }\r\n    }\r\n  }\r\n\r\n  timeEnd (type, fn) {\r\n    if (typeof type === 'string') {\r\n      if (!isUndef(this.timeStack[type])) {\r\n        const duration = Date.now() - this.timeStack[type]\r\n        typeof fn === 'function' && fn(duration)\r\n        this.timeStack[type] = null\r\n        return duration\r\n      } else {\r\n        warn(`Timer [${type}] does not exist.`, true)\r\n      }\r\n    }\r\n    return null\r\n  }\r\n\r\n  addCode (key, code) {\r\n    addCode(key, code)\r\n  }\r\n\r\n  // 调用数据上报的钩子\r\n  // 网络请求等具体的副作用暴露给外部\r\n  report (key, payload) {\r\n    key = getCode(key)\r\n\r\n    if (isUndef(this.reportStack[key])) {\r\n      this.reportStack[key] = [payload]\r\n      // 延迟 200ms 做批量上报\r\n      setTimeout(() => {\r\n        callHook(this.hooks, 'report', [key, this.reportStack[key]])\r\n        this.reportStack[key] = null\r\n      }, 200)\r\n    } else {\r\n      this.reportStack[key].push(payload)\r\n    }\r\n  }\r\n\r\n  // 用于包装一个方法\r\n  wraper (target, fn) {\r\n    return createWraper(target, fn)\r\n  }\r\n\r\n  // 插件\r\n  addPlugin (plugin, ...args) {\r\n    assert(\r\n      this.installedPlugins.has(plugin),\r\n      'Don\\'t repeat install plugin',\r\n    )\r\n\r\n    args.unshift(this)\r\n    if (typeof plugin.install === 'function') {\r\n      plugin.install.apply(plugin, args)\r\n    } else {\r\n      plugin.apply(null, args)\r\n    }\r\n    this.installedPlugins.add(plugin)\r\n\r\n  }\r\n\r\n  // 调用 setData 会调用此函数\r\n  // 开发者手动调用也可以\r\n  update (component) {\r\n    assert(isUndef(component), 'Missing component')\r\n    const isPage = this.depComponents.get(component)\r\n    const canProcessCfg = isPlainObject(component.SDKConfig)\r\n\r\n    if (canProcessCfg) {\r\n      handleConfigHooks.update(this, component, component.SDKConfig, isPage)\r\n    }\r\n    \r\n    callHook(this.hooks, 'update', [this, component, isPage])\r\n  }\r\n}","import { assert, isUndef, createWraper } from '../utils'\r\n\r\n// 自动上报的插件\r\nexport default function (sdk, opts) {\r\n  const { url, header = {} } = opts || {}\r\n  const allowMethods = ['GET', 'POST']\r\n\r\n  assert(\r\n    typeof url !== 'string',\r\n    'The request url must be a string.\\n\\n --- from [autoReport] plugin\\n',\r\n  )\r\n\r\n  // 这些是固定需要上报的数据\r\n  const genData = bm => {\r\n    const uid = typeof opts.uid === 'function' ? opts.uid() : ''\r\n    return {\r\n      bm,\r\n      uid,\r\n      tp: 0,\r\n      sc: 'mp',\r\n      sp: 'stat',\r\n      t: Date.parse(new Date()),\r\n      unid: 'za-ad10c-16d630b0690',\r\n      p: sdk.router.getCurrentPage().route,\r\n    }\r\n  }\r\n\r\n  // 只处理默认的类型，其他用于自己定义的通过回调来得到数据\r\n  function wraperReprot (key, val) {\r\n    let data = []\r\n    let method = 'GET'\r\n    \r\n    switch (key) {\r\n      // catchGlobalError\r\n      case 11 :\r\n        break\r\n\r\n      // routerError\r\n      case 130 :\r\n        break\r\n\r\n      // showTime\r\n      case 21 :\r\n        break\r\n\r\n      // initToRequestTime\r\n      case 20 :\r\n        data = val.map(initToRequestTime => ({ ...genData('time'), exd: { initToRequestTime } }))\r\n        break\r\n\r\n      // renderContentTime\r\n      case 22 :\r\n        data = val.map(renderContentTime => ({ ...genData('time'), exd: { renderContentTime } }))\r\n        break\r\n\r\n      // renderAllContentTime\r\n      case 23 :\r\n        data = val.map(renderAllContentTime => ({ ...genData('time'), exd: { renderAllContentTime } }))\r\n        break\r\n\r\n      // router\r\n      case 30 :\r\n        break\r\n\r\n      // other\r\n      default :\r\n        if (typeof opts.callback === 'function') {\r\n          const { data: _d, method: _m, module: _bm } = opts.callback(key, val)\r\n          assert(\r\n            !Array.isArray(data),\r\n            '[data] must be an Array\\n\\n --- from [autoReport] plugin\\n',\r\n          )\r\n\r\n          assert(\r\n            typeof _bm !== 'string',\r\n            '[module] must be an String\\n\\n --- from [autoReport] plugin\\n',\r\n          )\r\n          \r\n          // 保持需要处理的数据\r\n          method = _m\r\n          data = _d.map(exd => ({ ...genData(_bm), exd }))\r\n        }\r\n    }\r\n\r\n    if (allowMethods.includes(method) && data.length > 0) {\r\n      // 由于后端不支持一次性上报多条数据\r\n      // 所以需要发送多条请求，等接口更改\r\n      data.forEach(item => {\r\n        wx.request({\r\n          url,\r\n          method,\r\n          header,\r\n          data: item,\r\n        })\r\n      })\r\n    }\r\n  }\r\n\r\n  if (\r\n    isUndef(sdk.hooks.report) ||\r\n    typeof sdk.hooks.report === 'function' &&\r\n    sdk.hooks.report.name === 'defaultReport'\r\n  ) {\r\n    sdk.hooks.report = createWraper(sdk.hooks.report, wraperReprot)\r\n  } else {\r\n    sdk.hooks.report = wraperReprot\r\n  }\r\n}","import {\r\n  once,\r\n  assert,\r\n  isUndef,\r\n  createWraper,\r\n} from '../utils'\r\n\r\n// 首屏的各种加载时长统计\r\nexport default function (sdk, homePath) {\r\n  assert(\r\n    isUndef(homePath),\r\n    'Need a home page path.\\n\\n --- from [firstScreenTime] plugin\\n',\r\n  )\r\n\r\n  const hooks = sdk.hooks\r\n  if (isUndef(hooks.app)) hooks.app = {}\r\n  if (isUndef(hooks.page)) hooks.page = {}\r\n  \r\n  sdk.addCode('initToRequestTime', 20) // 初始化到发起请求的时间\r\n  sdk.addCode('showTime', 21) // 小程序启动的时长\r\n  sdk.addCode('renderContentTime', 22)  // 首屏有内容显示\r\n  sdk.addCode('renderAllContentTime', 23) // 所有内容显示的时间\r\n\r\n  // app 里面需要记录的时间\r\n  hooks.app.onLaunch = createWraper(\r\n    hooks.app.onLaunch,\r\n    () => {\r\n      // 记录初始化的时间\r\n      sdk.time('initToRequestTime')\r\n    },\r\n  )\r\n\r\n  hooks.app.onShow = createWraper(\r\n    hooks.app.onShow,\r\n    () => {\r\n      if (!isUndef(homePath)) {\r\n        sdk.time('renderContentTime')\r\n      }\r\n      // 打点记录渲染所有时长的时间，具体的接口在业务中写\r\n      sdk.time('renderAllContentTime')\r\n      // 记录当前 app 从显示到隐藏，一共停留的时长\r\n      sdk.time('showTime')\r\n    },\r\n  )\r\n    \r\n  hooks.app.onHide = createWraper(\r\n    hooks.app.onHide,\r\n    () => {\r\n      const duration = sdk.timeEnd('showTime')\r\n      sdk.report('showTime', duration)\r\n    },\r\n  )\r\n\r\n  hooks.app.onError = createWraper(\r\n    hooks.app.onError,\r\n    errMsg => {\r\n      // 自动上报在 app 里面捕获到的错误\r\n      sdk.report('catchGlobalError', errMsg)\r\n    },\r\n  )\r\n\r\n  // 首页渲染完成的时间\r\n  if (!isUndef(homePath)) {\r\n    hooks.page.onReady = createWraper(\r\n      hooks.app.onReady,\r\n      (sdk, page) => {\r\n        if (homePath === page.route) {\r\n          const duration = sdk.timeEnd('renderContentTime')\r\n          sdk.report('renderContentTime', duration)\r\n        }\r\n      },\r\n    )\r\n  }\r\n\r\n  // 在 SDK 中添加当前这个插件的方法\r\n  sdk.firstScreen = {\r\n    initToRequest: once(() => {\r\n      const duration = sdk.timeEnd('initToRequestTime')\r\n      sdk.report('initToRequestTime', duration)\r\n    }),\r\n    \r\n    renderAllTime: once(() => {\r\n      const duration = sdk.timeEnd('renderAllContentTime')\r\n      sdk.report('renderAllContentTime', duration)\r\n    }),\r\n  }\r\n}","import { createWraper } from '../utils'\r\n\r\nconst handleRouter = (routerType, router, opts = {}) => {\r\n  const { fail, success } = opts\r\n  const info = {\r\n    to: opts.url,\r\n    from: router.getCurrentPage().route,\r\n  }\r\n\r\n  // 路由跳转成功\r\n  opts.success = createWraper(\r\n    success,\r\n    () => router.report(routerType, info),\r\n  )\r\n\r\n  // 路由跳转发生错误\r\n  opts.fail = createWraper(\r\n    fail,\r\n    error => {\r\n      info.error = error\r\n      router.reportError(routerType, info)\r\n    },\r\n  )\r\n}\r\n\r\nexport default (sdk, rewrite) => {\r\n  // 导航相关方法\r\n  rewrite('reLaunch', opts => handleRouter('reLaunch', sdk.router, opts))\r\n  rewrite('switchTab', opts => handleRouter('switchTab', sdk.router, opts))\r\n  rewrite('navigateTo', opts => handleRouter('navigateTo', sdk.router, opts))\r\n  rewrite('redirectTo', opts => handleRouter('redirectTo', sdk.router, opts))\r\n}","import overideWX from './wx'\r\nimport handleConfigHooks from '../handle-config'\r\nimport { createWraper, isPlainObject, assert, callHook } from '../utils'\r\n\r\nexport const SDKCfgNamespace = 'SDKConfig'\r\n\r\n// 需要包裹的生命周期\r\nconst pageLifeTime = 'onLoad,onShow,onReady,onHide,onUnload'\r\nconst componentLifeTime = 'created,attached,ready,moved,detached'\r\nconst appLifeTime = 'onLaunch,onShow,onHide,onError,onPageNotFound'\r\n\r\n// 重写 component 和 page 的 config\r\nexport function overideComponent (sdk, config, isPage) {\r\n  const SDKConfig = config[SDKCfgNamespace]\r\n  const canProcessCfg = isPlainObject(SDKConfig)\r\n\r\n  const dispatch = (name, component, opts) => {\r\n    let compHooks, configHooks\r\n\r\n    // 得到钩子对象\r\n    if (isPage) {\r\n      compHooks = sdk.hooks.page\r\n      configHooks = handleConfigHooks.page\r\n    } else {\r\n      compHooks = sdk.hooks.component\r\n      configHooks = handleConfigHooks.component\r\n    }\r\n\r\n    if (name === 'onLoad' || name === 'attached') {\r\n      // 将 SDK 注入到组件中\r\n      component.SDK = sdk\r\n      // 添加依赖\r\n      sdk.depComponents.set(component, isPage)\r\n\r\n      // 包装 setState 方法，组件的每次更新我们都需要知道\r\n      const setData = component.setData\r\n      component.setData = function (data, callback) {\r\n        setData.call(this, data, \r\n          createWraper(callback, () => {\r\n            sdk.update(this)\r\n          })\r\n        )\r\n      }\r\n    }\r\n    if (name === 'onUnload' || name === 'detached') {\r\n      sdk.depComponents.delete(component)\r\n    }\r\n\r\n    // 如果当前组件有关于 sdk 的配置就需要处理\r\n    if (canProcessCfg) {\r\n      component[SDKCfgNamespace] = SDKConfig\r\n      callHook(configHooks, 'onLoad', [sdk, component, opts, SDKConfig, isPage])\r\n    }\r\n    callHook(compHooks, name, [sdk, component, opts])\r\n  }\r\n\r\n  // 包装所有生命周期函数\r\n  // 然后调用 hooks，具体的实现内容可以通过插件的形式处理\r\n  if (isPage) {\r\n    pageLifeTime.split(',').forEach(name => {\r\n      config[name] = createWraper(\r\n        config[name],\r\n        function (opts) {\r\n          dispatch(name, this, opts)\r\n        },\r\n      )\r\n    })\r\n  } else {\r\n    // Component\r\n    config.lifetimes = config.lifetimes || {}\r\n    const get = key => config[key] || config.lifetimes[key]\r\n    const set = (key, fn) => config[key] = config.lifetimes[key] = fn \r\n\r\n    componentLifeTime.split(',').forEach(name => {\r\n      set(name,\r\n        createWraper(\r\n          get(name),\r\n          function (opts) {\r\n            dispatch(name, this, opts)\r\n          },\r\n        )  \r\n      )\r\n    })\r\n  }\r\n  return config\r\n}\r\n\r\n// 重写 app 的 config\r\nexport function overideApp (sdk, config) {\r\n  const SDKConfig = config[SDKCfgNamespace]\r\n  const canProcessCfg = isPlainObject(SDKConfig)\r\n\r\n  appLifeTime.split(',').forEach(name => {\r\n    config[name] = createWraper(\r\n      config[name],\r\n      function (opts) {\r\n        if (canProcessCfg) {\r\n          this[SDKCfgNamespace] = SDKConfig\r\n          callHook(handleConfigHooks.app, name, [sdk, this, opts, SDKConfig, isPage])\r\n        }\r\n        callHook(sdk.hooks.app, name, [sdk, this, opts])\r\n      },\r\n    )\r\n  })\r\n\r\n  return config\r\n}\r\n\r\n// 重写 wx 类\r\nexport function overideWxClass (sdk, nativeWX) {\r\n  const overideClass = {}\r\n\r\n  overideWX(sdk, (name, fn) => {\r\n    // 只允许重写，不允许新增\r\n    // 如果需要新增全局方法，不应该写在这里\r\n    assert(!(name in nativeWX), 'Only allowed to rewrite.')\r\n    assert(name in overideClass, `${name} has been rewritten`)\r\n    overideClass[name] = createWraper(nativeWX[name], fn)\r\n  })\r\n\r\n  wx = Object.assign({}, nativeWX, overideClass)\r\n}","import SDK from './core'\r\nimport { warn } from './utils'\r\nimport * as plugins from './plugin'\r\nimport { overideApp, overideComponent, overideWxClass } from './overide'\r\n\r\nlet isInitComplete = false\r\n\r\nconst nativeWX = wx\r\nconst nativeApp = App\r\nconst nativePage = Page\r\nconst nativeComponent = Component\r\n\r\nconst filterOpts = opts => {\r\n  return Object.assign(\r\n    {\r\n      hooks: {\r\n        // defaultReport 这个函数名是需要的，在一些插件里面可能需要因此判断是不是默认的函数\r\n        report: function defaultReport () {\r\n          warn('you need defined [report] hook function.')\r\n        },\r\n      },\r\n    },\r\n    opts,\r\n  )\r\n}\r\n\r\nfunction initSDK (opts) {\r\n  if (isInitComplete) {\r\n    warn('Can\\'t allow repeat initialize.')\r\n  }\r\n\r\n  const sdk = new SDK(filterOpts(opts || {}))\r\n\r\n  Page = function (config) {\r\n    config = overideComponent(sdk, config, true)\r\n    return nativePage.call(this, config)\r\n  }\r\n  Component = function (config) {\r\n    config = overideComponent(sdk, config, false)\r\n    return nativeComponent.call(this, config)\r\n  }\r\n  App = function (config) {\r\n    config = overideApp(sdk, config)\r\n    return nativeApp.call(this, config)\r\n  }\r\n  // 重写 wx 原生类\r\n  overideWxClass(sdk, nativeWX)\r\n\r\n  isInitComplete = true\r\n  return sdk\r\n}\r\n\r\nexport {\r\n  plugins,\r\n  initSDK as default,\r\n}"],"names":["warn","message","isWarn","console","Error","assert","condition","error","once","fn","called","apply","arguments","isUndef","v","undefined","callHook","hooks","name","params","createWraper","target","args","isPlainObject","obj","proto","Object","getPrototypeOf","baseProto","Router","constructor","sdk","report","payload","type","reportError","getCurrentPage","pages","getCurrentPages","Array","isArray","length","app","page","onLoad","opts","SDKConfig","onUnLoad","component","update","isPage","reportCodes","addCode","key","code","getCode","SDK","reportStack","depComponents","Map","router","installedPlugins","Set","timeStack","create","time","Date","now","timeEnd","duration","setTimeout","push","wraper","addPlugin","plugin","has","unshift","install","add","get","canProcessCfg","handleConfigHooks","url","header","allowMethods","genData","bm","uid","tp","sc","sp","t","parse","unid","p","route","wraperReprot","val","data","method","map","initToRequestTime","exd","renderContentTime","renderAllContentTime","callback","_d","_m","module","_bm","includes","forEach","item","wx","request","homePath","onLaunch","onShow","onHide","onError","errMsg","onReady","firstScreen","initToRequest","renderAllTime","handleRouter","routerType","fail","success","info","to","from","rewrite","SDKCfgNamespace","pageLifeTime","componentLifeTime","appLifeTime","overideComponent","config","dispatch","compHooks","configHooks","set","setData","call","delete","split","lifetimes","overideApp","overideWxClass","nativeWX","overideClass","overideWX","assign","isInitComplete","nativeApp","App","nativePage","Page","nativeComponent","Component","filterOpts","defaultReport","initSDK"],"mappings":"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"}